!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("app")):"function"==typeof define&&define.amd?define(["app"],e):"object"==typeof exports?exports.faultApp=e(require("app")):t.faultApp=e(t.app)}(window,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e),n.d(e,"register",function(){return P});var r=n(2),o=n(4),i=n(5),c=n(6),a=n(7),u=n(8),s=n(9),l=n(21),p=n(20),f=n(13),d=n(15);function b(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var y=void 0,m=function(t){return b(this,void 0),{currentProblemsProperties:Object(d.createCurrentProblemsProperties)(t)}}.bind(void 0),h=function(t){var e=this;return b(this,void 0),{currentProblemsActions:Object(d.createCurrentProblemsActions)(t.dispatch,!0),setCurrentPanel:function(n){return b(this,e),t.dispatch(new p.SetPanelAction(n))}.bind(this)}}.bind(void 0),v=Object(i.default)(m,h)(function(t){var e=this;return b(this,void 0),y!==t.match.params.mountId&&(y=t.match.params.mountId||void 0,window.setTimeout(function(){b(this,e),y&&(t.setCurrentPanel("CurrentProblem"),t.currentProblemsActions.onFilterChanged("objectId",y),t.currentProblemsProperties.showFilter||t.currentProblemsActions.onToggleFilter(),t.currentProblemsActions.onRefresh())}.bind(this))),r.createElement(l.FaultApplication,null)}.bind(void 0)),g=Object(o.withRouter)(function(t){return b(this,void 0),r.createElement(o.Switch,null,r.createElement(o.Route,{path:"".concat(t.match.path,"/:mountId?"),component:v}),r.createElement(o.Redirect,{to:"".concat(t.match.path)}))}.bind(void 0));function P(){var t=this,e=a.default.registerApplication({name:"faultApp",icon:c.faBell,rootComponent:g,rootActionHandler:s.faultAppRootHandler,menuEntry:"Fault"});Object(u.subscribe)("ProblemNotification",function(n){b(this,t);var r=e&&e.applicationStore;n&&r&&r.dispatch(new f.AddFaultNotificationAction(n))}.bind(this))}},function(t,e,n){t.exports=n(3)(2)},function(e,n){e.exports=t},function(t,e,n){t.exports=n(3)(53)},function(t,e,n){t.exports=n(3)(56)},function(t,e,n){t.exports=n(3)(54)},function(t,e,n){t.exports=n(3)(125)},function(t,e,n){t.exports=n(3)(361)},function(t,e,n){"use strict";n.r(e),n.d(e,"faultAppRootHandler",function(){return l});var r=n(10),o=n(11),i=n(15),c=n(19),a=n(20);var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return function(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}(this,void 0),e instanceof a.SetPanelAction&&(t=e.panelId),t}.bind(void 0),s={currentProblems:i.currentProblemsActionHandler,faultNotifications:o.faultNotificationsHandler,alarmLogEntries:c.alarmLogEntriesActionHandler,currentOpenPanel:u},l=Object(r.combineActionHandler)(s);e.default=l},function(t,e,n){t.exports=n(3)(156)},function(t,e,n){"use strict";n.r(e),n.d(e,"faultNotificationsHandler",function(){return c});n(12);var r=n(13);function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i={faults:[],since:new Date},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;return function(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}(this,void 0),e instanceof r.AddFaultNotificationAction?t=Object.assign({},t,{faults:o(t.faults).concat([e.fault])}):e instanceof r.ResetFaultNotificationsAction&&(t=Object.assign({},t,{faults:[],since:new Date})),t}.bind(void 0)},function(t,e,n){t.exports=n(3)(7)},function(t,e,n){"use strict";n.r(e),n.d(e,"FaultApplicationBaseAction",function(){return l}),n.d(e,"AddFaultNotificationAction",function(){return p}),n.d(e,"ResetFaultNotificationsAction",function(){return f});var r=n(14);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return i(this,e),c(this,a(e).apply(this,arguments))}return u(e,r["Action"]),e}(),p=function(t){function e(t){var n;return i(this,e),(n=c(this,a(e).call(this))).fault=t,n}return u(e,l),e}(),f=function(t){function e(){return i(this,e),c(this,a(e).apply(this,arguments))}return u(e,l),e}()},function(t,e,n){t.exports=n(3)(59)},function(t,e,n){"use strict";n.r(e),n.d(e,"currentProblemsActionHandler",function(){return u}),n.d(e,"createCurrentProblemsActions",function(){return s}),n.d(e,"createCurrentProblemsProperties",function(){return l}),n.d(e,"currentProblemsReloadAction",function(){return p});var r=n(16),o=n(18);function i(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var c=Object(o.createSearchDataHandler)("sdnevents/faultcurrent",null,function(t){return i(this,void 0),Object.assign({_id:t._id},t._source.faultCurrent)}.bind(void 0),function(t){return i(this,void 0),"faultCurrent.".concat(t)}.bind(void 0)),a=Object(r.createExternal)(c,function(t){return i(this,void 0),t.faultApp.currentProblems}.bind(void 0)),u=a.actionHandler,s=a.createActions,l=a.createProperties,p=a.reloadAction},function(t,e,n){"use strict";n.r(e),n.d(e,"createExternal",function(){return i});var r=n(14),o=n(17);function i(t,e){class n extends r.Action{}class i extends n{constructor(t){super(),this.orderBy=t}}class c extends n{constructor(t){super(),this.page=t}}class a extends n{constructor(t){super(),this.rowsPerPage=t}}class u extends n{constructor(t){super(),this.filter=t}}class s extends n{constructor(t){super(),this.show=t}}class l extends n{constructor(){super()}}class p extends n{constructor(t){super(),this.result=t}}const f={order:"asc",orderBy:null,selected:null,rows:[],rowCount:0,page:0,rowsPerPage:10,loading:!1,showFilter:!1,filter:{}},d=(n,r)=>{n(new l);const i=e(r());Promise.resolve(t(i.page,i.rowsPerPage,i.orderBy,i.order,i.showFilter&&i.filter||{})).then(t=>{n(new p(t))}).catch(t=>new o.AddErrorInfoAction(t))};return{reloadAction:d,createActions:(t,n=!1)=>({onRefresh:()=>{t(d)},onHandleRequestSort:e=>{t(t=>{t(new i(e)),!n&&t(d)})},onToggleFilter:()=>{t((t,r)=>{const{showFilter:o}=e(r());t(new s(!o)),!n&&t(d)})},onFilterChanged:(r,o)=>{t((t,i)=>{let{filter:c}=e(i());c=Object.assign({},c,{[r]:o}),t(new u(c)),!n&&t(d)})},onHandleChangePage:e=>{t(t=>{t(new c(e)),!n&&t(d)})},onHandleChangeRowsPerPage:e=>{t(t=>{t(new a(e||10)),!n&&t(d)})}}),createProperties:t=>Object.assign({},e(t)),actionHandler:(t=f,e)=>e instanceof n?(e instanceof l?t=Object.assign({},t,{loading:!0}):e instanceof p?t=Object.assign({},t,{loading:!1,rows:e.result.rows,rowCount:e.result.rowCount,page:e.result.page}):e instanceof i?t=Object.assign({},t,{loading:!0,orderBy:t.orderBy===e.orderBy&&"desc"===t.order?null:e.orderBy,order:t.orderBy===e.orderBy&&"asc"===t.order?"desc":"asc"}):e instanceof s?t=Object.assign({},t,{loading:!0,showFilter:e.show}):e instanceof u?t=Object.assign({},t,{loading:!0,filter:e.filter}):e instanceof c?t=Object.assign({},t,{loading:!0,page:e.page}):e instanceof a&&(t=Object.assign({},t,{loading:!0,rowsPerPage:e.rowsPerPage})),t):t}}},function(t,e,n){t.exports=n(3)(60)},function(t,e,n){t.exports=n(3)(368)},function(t,e,n){"use strict";n.r(e),n.d(e,"alarmLogEntriesActionHandler",function(){return u}),n.d(e,"createAlarmLogEntriesActions",function(){return s}),n.d(e,"createAlarmLogEntriesProperties",function(){return l}),n.d(e,"alarmLogEntriesReloadAction",function(){return p});var r=n(16),o=n(18);function i(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var c=Object(o.createSearchDataHandler)("sdnevents/faultlog",null,function(t){return i(this,void 0),Object.assign({_id:t._id},t._source.fault)}.bind(void 0),function(t){return i(this,void 0),"fault.".concat(t)}.bind(void 0)),a=Object(r.createExternal)(c,function(t){return i(this,void 0),t.faultApp.alarmLogEntries}.bind(void 0)),u=a.actionHandler,s=a.createActions,l=a.createProperties,p=a.reloadAction},function(t,e,n){"use strict";n.r(e),n.d(e,"SetPanelAction",function(){return u});var r=n(14);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,c(e).call(this))).panelId=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,r["Action"]),e}()},function(t,e,n){"use strict";n.r(e),n.d(e,"FaultApplication",function(){return j});var r=n(2),o=n(4),i=n(22),c=n(6),a=n(23),u=n(24),s=n(5),l=n(15),p=n(19),f=n(20);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}var P=function(t){return g(this,void 0),{activePanel:t.faultApp.currentOpenPanel,currentProblemsProperties:Object(l.createCurrentProblemsProperties)(t),faultNotifications:t.faultApp.faultNotifications,alarmLogEntriesProperties:Object(p.createAlarmLogEntriesProperties)(t)}}.bind(void 0),w=function(t){var e=this;return g(this,void 0),{currentProblemsActions:Object(l.createCurrentProblemsActions)(t.dispatch),alarmLogEntriesActions:Object(p.createAlarmLogEntriesActions)(t.dispatch),reloadCurrentProblems:function(){return g(this,e),t.dispatch(l.currentProblemsReloadAction)}.bind(this),reloadAlarmLogEntries:function(){return g(this,e),t.dispatch(p.alarmLogEntriesReloadAction)}.bind(this),setCurrentPanel:function(n){return g(this,e),t.dispatch(new f.SetPanelAction(n))}.bind(this)}}.bind(void 0),A=a.MaterialTable,O=function(t){function e(){var t,n=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=m(this,h(e).apply(this,arguments))).renderIcon=function(t){return g(this,n),r.createElement(i.FontAwesomeIcon,{icon:c.faExclamationTriangle})}.bind(this),t}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,r["Component"]),n=e,(o=[{key:"render",value:function(){var t=this,e=this.props.activePanel,n=function(e){g(this,t);var n=e===this.props.activePanel?null:e;switch(this.props.setCurrentPanel(n),n){case"CurrentProblem":this.props.reloadCurrentProblems();break;case"AlarmLog":this.props.reloadAlarmLogEntries()}}.bind(this);return r.createElement(r.Fragment,null,r.createElement(u.Panel,{activePanel:e,panelId:"CurrentProblem",onToggle:n,title:"Current Problem List"},r.createElement(A,b({idProperty:"_id",columns:[{property:"icon",title:"",type:a.ColumnType.custom,customControl:this.renderIcon},{property:"timeStamp",type:a.ColumnType.text,title:"Time Stamp"},{property:"nodeName",title:"Node Name",type:a.ColumnType.text},{property:"counter",title:"Count",type:a.ColumnType.numeric,width:"100px"},{property:"objectId",title:"Object Id",type:a.ColumnType.text},{property:"problem",title:"Alarm Type",type:a.ColumnType.text},{property:"severity",title:"Severity",type:a.ColumnType.text,width:"140px"}]},this.props.currentProblemsProperties,this.props.currentProblemsActions))),r.createElement(u.Panel,{activePanel:e,panelId:"AlarmNotifications",onToggle:n,title:"Alarm Notifications ".concat(this.props.faultNotifications.faults.length," ").concat(this.props.faultNotifications.since)},r.createElement(A,{rows:this.props.faultNotifications.faults,asynchronus:!0,columns:[{property:"icon",title:"",type:a.ColumnType.custom,customControl:this.renderIcon},{property:"timeStamp",title:"Time Stamp"},{property:"nodeName",title:"Node Name"},{property:"counter",title:"Count",width:"100px"},{property:"objectId",title:"Object Id"},{property:"problem",title:"Alarm Type"},{property:"severity",title:"Severity",width:"140px"}],idProperty:"_id"})),r.createElement(u.Panel,{activePanel:e,panelId:"AlarmLog",onToggle:n,title:"Alarm Log"},r.createElement(A,b({idProperty:"_id",columns:[{property:"icon",title:"",type:a.ColumnType.custom,customControl:this.renderIcon},{property:"timeStamp",title:"Time Stamp"},{property:"nodeName",title:"Node Name"},{property:"counter",title:"Count",type:a.ColumnType.numeric,width:"100px"},{property:"objectId",title:"Object Id"},{property:"problem",title:"Alarm Type"},{property:"severity",title:"Severity",width:"140px"}]},this.props.alarmLogEntriesProperties,this.props.alarmLogEntriesActions))))}}])&&y(n.prototype,o),s&&y(n,s),e}(),j=Object(o.withRouter)(Object(s.default)(P,w)(O));e.default=j},function(t,e,n){t.exports=n(3)(75)},function(t,e,n){t.exports=n(3)(132)},function(t,e,n){t.exports=n(3)(364)}])});